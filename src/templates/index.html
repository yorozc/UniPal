{% extends 'base.html' %}

{% block body %}
<div class="layout">
  
  <!-- LEFT SIDEBAR -->
  <aside class="sidebar">
    <nav class="nav-icons">
      <a href="{{ url_for('main.index') }}" title="Home">
        <img src="{{ url_for('static', filename='icons/home.svg') }}" alt="Home">
      </a>

      <a href="{{ url_for('pal.add_post') }}" title="New">
        <img src="{{ url_for('static', filename='icons/plus.svg') }}" alt="New">
      </a>

    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    {% for post in posts %}
    <article class="post-card">
      <header class="post-header">
        <h2>{{ post.assignment }}</h2>
        <p>Class: {{ post.class }}</p>
      </header>

      <div class="post-details">
        <p><strong>Posted by:</strong> {{ post.name }} ({{ post.email }})</p>
        <p><strong>Date:</strong> {{ post["start-date"] }} at {{ post["start-time"] }}</p>
        <p><strong>Needed:</strong> {{ post.pals }} pals</p>
      </div>

      <div class="post-desc">
        <p>{{ post.description }}</p>
      </div>

      <footer class="post-actions">
        {% if current_user.is_authenticated %}
          <form action="{{ url_for('pal.reserve', post_id=post._id|string) }}" method="POST">
            <button class="btn reserve-btn" type="submit">Reserve</button>
          </form>
        {% endif %}
      </footer>
    </article>
    {% endfor %}
    </main>

</div>
{% endblock %}


